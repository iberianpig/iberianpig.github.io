<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mysql Rails on iberianpigsty</title>
    <link>http://iberianpig.github.io/categories/mysql-rails/</link>
    <description>Recent content in Mysql Rails on iberianpigsty</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-jp</language>
    <copyright>Copyright (c) 2014 - 2016, iberianpigsty; all rights reserved.</copyright>
    <lastBuildDate>Sat, 23 Jan 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://iberianpig.github.io/categories/mysql-rails/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>mysqlで特定のテーブルのDumpをのみ取得する</title>
      <link>http://iberianpig.github.io/posts/2015-09-01-mysql%E3%81%A7%E4%BB%96%E7%92%B0%E5%A2%83%E3%81%A7%E7%89%B9%E5%AE%9A%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AEdump%E3%82%92%E3%81%A8%E3%81%A3%E3%81%A6%E6%9C%AC%E7%95%AA%E7%92%B0%E5%A2%83%E3%81%AB%E6%B5%81%E3%81%97%E8%BE%BC%E3%81%BF%E3%81%9F%E3%81%84/</link>
      <pubDate>Sat, 23 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>http://iberianpig.github.io/posts/2015-09-01-mysql%E3%81%A7%E4%BB%96%E7%92%B0%E5%A2%83%E3%81%A7%E7%89%B9%E5%AE%9A%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AEdump%E3%82%92%E3%81%A8%E3%81%A3%E3%81%A6%E6%9C%AC%E7%95%AA%E7%92%B0%E5%A2%83%E3%81%AB%E6%B5%81%E3%81%97%E8%BE%BC%E3%81%BF%E3%81%9F%E3%81%84/</guid>
      <description>

&lt;h1 id=&#34;必要となった背景:70a73770871b0e628cc7fededae2078d&#34;&gt;必要となった背景&lt;/h1&gt;

&lt;p&gt;1つのコンテンツに対してそのコンテンツに含まれる複数のカテゴリの組み合わせを元におすすめのコンテンツを表示する。&lt;br /&gt;
動的に表示させようとしたが、現行のままでは動的に出すのは厳しく、バッチ処理でおすすめコンテンツの情報をキャッシュすることにした。&lt;br /&gt;
&lt;!-- more --&gt;
本番環境の裏側で実行させようと考えたが、非常に遅く、１ヶ月ほど時間がかかってしまうため、
一度本番のDumpを取得した上で別の環境でバッチを回し、その結果を本番環境へロードさせたほうが良いということになった。&lt;/p&gt;

&lt;h1 id=&#34;テーブル別のdump:70a73770871b0e628cc7fededae2078d&#34;&gt;テーブル別のDump&lt;/h1&gt;

&lt;p&gt;いつもDB一括でMySQL workbenchでDumpを取得しているなど、mysqlコマンドに疎い。
今回は他のテーブルは必要なかったので、必要なテーブルのDumpのみを取得する方法を調べた。&lt;/p&gt;

&lt;p&gt;下記コマンドでDumpを取得する。複数テーブルの場合は続けてテーブル名を入力すればよい。
また、今回の本番環境、隔離環境はRailsを利用しており、migrationにて既にテーブルが作成されている。&lt;br /&gt;
そのため&lt;code&gt;-t&lt;/code&gt;オプションにてCREATE TABLE文をスキップさせる&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;mysqldump -u &amp;lt;USERNAME&amp;gt; -p -t &amp;lt;DBNAME&amp;gt; &amp;lt;TABLENAME1&amp;gt; [ &amp;lt;TABLENAME2&amp;gt; ... ] &amp;gt; &amp;lt;DUMPFILENAME&amp;gt;.sql
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;dumpのインポート:70a73770871b0e628cc7fededae2078d&#34;&gt;Dumpのインポート&lt;/h1&gt;

&lt;p&gt;下記コマンドでインポート&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;mysqll -u &amp;lt;USERNAME&amp;gt; -p &amp;lt;DBNAME&amp;gt; &amp;lt; &amp;lt;DUMPFILENAME&amp;gt;.sql
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;special-thanks:70a73770871b0e628cc7fededae2078d&#34;&gt;Special Thanks&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;http://easyramble.com/backup-only-mysql-tables.html&#34;&gt; MySQL で特定のテーブルのみをバックアップ - Easy Ramble &lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>