<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Octopress on iberianpigsty</title>
    <link>https://iberianpig.github.io/categories/octopress/</link>
    <description>Recent content in Octopress on iberianpigsty</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-jp</language>
    <copyright>Copyright (c) 2014 - 2016, iberianpigsty; all rights reserved.</copyright>
    <lastBuildDate>Wed, 22 Jan 2014 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://iberianpig.github.io/categories/octopress/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Octopressで下書き保存をデフォルト設定にする方法</title>
      <link>https://iberianpig.github.io/posts/2014-01-22-generate-publish-false-post-with-octopress/</link>
      <pubDate>Wed, 22 Jan 2014 00:00:00 +0000</pubDate>
      
      <guid>https://iberianpig.github.io/posts/2014-01-22-generate-publish-false-post-with-octopress/</guid>
      <description>

&lt;h1 id=&#34;octopressでの下書き保存:53b0eaefe8e04cbfb84cb4df4d05c839&#34;&gt;Octopressでの下書き保存&lt;/h1&gt;

&lt;p&gt;普通にdeployすると、&lt;code&gt;rake new_post[&#39;hogehoge&#39;]&lt;/code&gt;で生成された&lt;code&gt;/_posts&lt;/code&gt;配下の記事がすべてPublishされてしまう。
&lt;!-- more --&gt;&lt;/p&gt;

&lt;h2 id=&#34;一時的に手元にとどめておくためには:53b0eaefe8e04cbfb84cb4df4d05c839&#34;&gt;一時的に手元にとどめておくためには&lt;/h2&gt;

&lt;p&gt;Octopressデフォルトのプラグインがあるので、記事のファイルに『下書き』であることを明示させればよい。&lt;/p&gt;

&lt;p&gt;実際は&lt;code&gt;yyyy-MM-dd-[$title].markdown&lt;/code&gt;内に &lt;code&gt;published: false&lt;/code&gt;を記述するだけ。
(※$titleは生成された記事毎に異なります)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-diff&#34;&gt;  layout: post
  title: &amp;quot;Octopressで下書き保存をデフォルト設定にする方法&amp;quot;
  date: 2014-01-22
  comments: true
  categories:
+ published: false
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;一番下の&lt;code&gt;published: false&lt;/code&gt;を追記。&lt;/p&gt;

&lt;p&gt;これでrake deployしてもpublishされないため、投稿する場合はfalseをtrueに変える必要がある。&lt;/p&gt;

&lt;h1 id=&#34;下書き保存をデフォルト設定:53b0eaefe8e04cbfb84cb4df4d05c839&#34;&gt;下書き保存をデフォルト設定&lt;/h1&gt;

&lt;p&gt;記事生成時に下書き保存をデフォルトで設定してほしい場合、RakeFileを編集する。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-diff&#34;&gt;task :new_post, :title do |t, args|
  if args.title
    title = args.title
  else
    title = get_stdin(&amp;quot;Enter a title for your post: &amp;quot;)
  end
  raise &amp;quot;### You haven&#39;t set anything up yet. First run `rake install` to set up an Octopress theme.&amp;quot; unless File.directory?(source_dir)
  mkdir_p &amp;quot;#{source_dir}/#{posts_dir}&amp;quot;
  filename = &amp;quot;#{source_dir}/#{posts_dir}/#{Time.now.strftime(&#39;%Y-%m-%d&#39;)}-#{title.to_url}.#{new_post_ext}&amp;quot;
  if File.exist?(filename)
    abort(&amp;quot;rake aborted!&amp;quot;) if ask(&amp;quot;#{filename} already exists. Do you want to overwrite?&amp;quot;, [&#39;y&#39;, &#39;n&#39;]) == &#39;n&#39;
  end
  puts &amp;quot;Creating new post: #{filename}&amp;quot;
  open(filename, &#39;w&#39;) do |post|
    post.puts &amp;quot;---&amp;quot;
    post.puts &amp;quot;layout: post&amp;quot;
    post.puts &amp;quot;title: \&amp;quot;#{title.gsub(/&amp;amp;/,&#39;&amp;amp;amp;&#39;)}\&amp;quot;&amp;quot;
    post.puts &amp;quot;date: #{Time.now.strftime(&#39;%Y-%m-%d %H:%M&#39;)}&amp;quot;
    post.puts &amp;quot;comments: true&amp;quot;
    post.puts &amp;quot;categories: &amp;quot;
+    post.puts &amp;quot;published: false&amp;quot;
    post.puts &amp;quot;---&amp;quot;
  end
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;task :new_post,&lt;/code&gt;で始まるブロック内に&lt;code&gt;post.puts &amp;quot;published: false&amp;quot;&lt;/code&gt;の行を&lt;code&gt;post.puts &amp;quot;---&amp;quot;&lt;/code&gt; で囲われるように追記。&lt;/p&gt;

&lt;p&gt;これでRake new_postが呼ばれた時点で&lt;code&gt;published: false&lt;/code&gt;が入った状態で記事を生成するようになる。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>