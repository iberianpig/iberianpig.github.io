<!doctype html><html><head><meta charset=utf-8><meta name=generator content="Hugo 0.82.1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link href="//fonts.googleapis.com/css?family=Noto+Sans:400,700|Pacifico" rel=stylesheet><link href=https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css rel=stylesheet integrity=sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS crossorigin=anonymous><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css><link rel=stylesheet href=https://iberianpig.github.io/css/styles.css><link rel=stylesheet href=https://iberianpig.github.io/css/custom.css><link rel=alternate type=application/rss+xml title=RSS href=https://iberianpig.github.io/index.xml><title>Fusumaがv2にアップデートしたので新機能を紹介する - iberianpigsty</title><meta property="og:title" content="Fusumaがv2にアップデートしたので新機能を紹介する - iberianpigsty"><meta name=description content="Fusumaがv2にアップデート。3本指ドラッグやスワイプでのウインドウ切り替え、アプリ固有のジェスチャなどが可能になった。"><meta property="og:url" content="https://iberianpig.github.io/posts/2021-04-26_introducing_new_fusuma_2_features/"><meta property="og:description" content="Fusumaがv2にアップデート。3本指ドラッグやスワイプでのウインドウ切り替え、アプリ固有のジェスチャなどが可能になった。"><meta property="og:image" content="https://opengraph.githubassets.com/ecc39c3b5067e737618dce4b17876b2ef6c628c6dbcacd9db938a2a57e8b161c/iberianpig/fusuma"><meta name=twitter:card content="summary"><meta name=twitter:site content="@nukumaro22"><meta name=twitter:creator content="@nukumaro22"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/iberianpig.github.io\/"},"headline":"Fusumaがv2にアップデートしたので新機能を紹介する |  ","image":{"@type":"ImageObject","url":"","height":700,"width":700},"datePublished":"2021-04-26T22:05:57JST","dateModified":"2021-04-26T22:05:57JST","author":{"@type":"Person","name":"Kohei Yamada","image":"https:\/\/iberianpig.github.io\/images/logo.png"},"publisher":{"@type":"Organization","name":"Copyright (c) 2014 - 2021, iberianpigsty; all rights reserved.","logo":{"@type":"ImageObject","url":"https:\/\/iberianpig.github.io\/images/logo.png","height":60,"width":60}},"description":"Fusumaがv2にアップデート。3本指ドラッグやスワイプでのウインドウ切り替え、アプリ固有のジェスチャなどが可能になった。"}</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-4578444047174224",enable_page_level_ads:!0})</script><script src=https://kit.fontawesome.com/13953638e7.js></script></head><body><header class=l-header><div class=p-logo><a href=https://iberianpig.github.io/>iberianpigsty</a></div></header><div class=container><div class=row><div class=col-md-9><article class=single><div class=image style=background-image:url(https://opengraph.githubassets.com/ecc39c3b5067e737618dce4b17876b2ef6c628c6dbcacd9db938a2a57e8b161c/iberianpig/fusuma)></div><div class=body><h1>Fusumaがv2にアップデートしたので新機能を紹介する</h1><nav><ul class=terms><li><a href=https://iberianpig.github.io/tags/linux/>#Linux</a></li><li><a href=https://iberianpig.github.io/tags/ruby/>#ruby</a></li><li><a href=https://iberianpig.github.io/tags/libinput/>#libinput</a></li></ul></nav><aside class=p-share><div class=share-inner><a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2021-04-26_introducing_new_fusuma_2_features%2f&text=Fusuma%e3%81%8cv2%e3%81%ab%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%e3%81%97%e3%81%9f%e3%81%ae%e3%81%a7%e6%96%b0%e6%a9%9f%e8%83%bd%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%99%e3%82%8b&tw_p=tweetbutton" title=Twitterでシェア class=tw target=_blank rel=nofollow></a><a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fiberianpig.github.io%2fposts%2f2021-04-26_introducing_new_fusuma_2_features%2f&t=Fusuma%e3%81%8cv2%e3%81%ab%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%e3%81%97%e3%81%9f%e3%81%ae%e3%81%a7%e6%96%b0%e6%a9%9f%e8%83%bd%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%99%e3%82%8b" title=Facebookでシェア class=fb target=_blank rel=nofollow></a><a href="http://b.hatena.ne.jp/add?mode=confirm&url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2021-04-26_introducing_new_fusuma_2_features%2f&title=Fusuma%e3%81%8cv2%e3%81%ab%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%e3%81%97%e3%81%9f%e3%81%ae%e3%81%a7%e6%96%b0%e6%a9%9f%e8%83%bd%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%99%e3%82%8b" title=はてなブックマーク class=ht target=_blank rel=nofollow></a><a href="http://getpocket.com/edit?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2021-04-26_introducing_new_fusuma_2_features%2f&title=Fusuma%e3%81%8cv2%e3%81%ab%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%e3%81%97%e3%81%9f%e3%81%ae%e3%81%a7%e6%96%b0%e6%a9%9f%e8%83%bd%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%99%e3%82%8b" title=Pocketであとで読む class=pk target=_blank rel=nofollow></a></div></aside><div class=content><p>Linux向けのマルチタッチジェスチャツールの<a href=https://github.com/iberianpig/fusuma>Fusuma</a>がv2にバージョンアップした。
新たにジェスチャの設定項目が充実して、細かいところに手が届くようになった。</p><div class=iframely-embed><div class=iframely-responsive style=padding-bottom:50%;padding-top:120px><a href=https://github.com/iberianpig/fusuma data-iframely-url="//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fgithub.com%2Fiberianpig%2Ffusuma&key=f073c4f447189e73167146bd9d0f6195"></a></div></div><script async src=//cdn.iframe.ly/embed.js></script><h2 id=fusuma-v2のアップデートの概要>Fusuma v2のアップデートの概要</h2><p>Fusuma v2ではマルチプロセス化、I/O多重化、継続ジェスチャ、contextに応じた設定の切り替えなど、
色々とアップデートが入った結果、以下のような機能が実現できるようになった。</p><ul><li>アプリ固有のジェスチャ設定(fusuma-plugin-appmatcher)</li><li>Mac OSスタイルの3本指ドラッグ</li><li>Windowsスタイルの3本指スワイプでのウィンドウ切り替え</li><li>スワイプ/ローテートによる音量調整・輝度変更</li></ul><h2 id=動作確認した環境>動作確認した環境</h2><p>この記事内での設定はDELL XPS 13 9310上のUbuntu 20.04(X11/Gnome-shell)で動作確認している。
利用しているディストリビューションやデスクトップ環境に応じてショートカットキーなどは適宜読み替えて欲しい。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ fusuma --version
reload config: /home/iberianpig/.config/fusuma/config.yml
---------------------------------------------
Fusuma: 2.0.5
libinput: 1.16.5
ruby 2.7.0p0
OS: Linux 5.10.0-1026-oem <span style=color:#75715e>#27-Ubuntu SMP Thu May 6 07:19:13 UTC 2021</span>
Distribution: Ubuntu 20.04.2 LTS <span style=color:#ae81ff>\n</span> <span style=color:#ae81ff>\l</span>
Desktop session: ubuntu x11
---------------------------------------------
</code></pre></div><p>なお、Fusuma v2から要求するRubyバージョンが2.5.1以上(Ubuntu 18.04のデフォルトのRubyバージョン)となっているので注意。</p><h2 id=fusumaとプラグインを最新版にアップデート>Fusumaとプラグインを最新版にアップデート</h2><p>gemコマンドでアップデートできる。
システムワイドのRubyを使ってインストールしていない場合<code>sudo</code>は不要。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ sudo gem update fusuma
</code></pre></div><p>インストール済みのFusumaプラグインがある場合はそれらをアップデートしておく。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># プラグインをリストする</span>
$ sudo gem list fusuma-plugin-
fusuma-plugin-keypress <span style=color:#f92672>(</span>0.4.1<span style=color:#f92672>)</span>
fusuma-plugin-sendkey <span style=color:#f92672>(</span>0.6.2<span style=color:#f92672>)</span>
fusuma-plugin-wmctrl <span style=color:#f92672>(</span>0.4.3<span style=color:#f92672>)</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># プラグインをアップデート</span>
$ sudo gem update fusuma-plugin-sendkey fusuma-plugin-wmctrl fusuma-plugin-keypress
</code></pre></div><h2 id=アプリケーション固有のジェスチャを設定する>アプリケーション固有のジェスチャを設定する</h2><p><a href=https://github.com/iberianpig/fusuma-plugin-appmatcher>fusuma-plugin-appmatcher</a>をインストールするとFusumaのconfig.yml上でアプリケーション固有の設定ができるようになる。</p><div class=iframely-embed><div class=iframely-responsive style=padding-bottom:50%;padding-top:120px><a href=https://github.com/iberianpig/fusuma-plugin-appmatcher/tree/master/lib/fusuma/plugin/appmatcher data-iframely-url="//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fgithub.com%2Fiberianpig%2Ffusuma-plugin-appmatcher%2Ftree%2Fmaster%2Flib%2Ffusuma%2Fplugin%2Fappmatcher&key=f073c4f447189e73167146bd9d0f6195"></a></div></div><script async src=//cdn.iframe.ly/embed.js></script><p>これまでジェスチャの設定はアプリ関係なくグローバルな設定のみだったので、アプリ毎に微妙にショートカットキーが違う場合も対応できるようになる。</p><p>自分が動作確認できるX11とUbuntu-Waylandは現在サポートしているが、Plasma Waylandや他のWayland環境へは未対応。
コマンドから<code>wm_class</code>を取得できさえすれば実装可能なので、<a href=https://github.com/iberianpig/fusuma-plugin-appmatcher>fusuma-plugin-appmatcher</a>にPull Requestを作ってもらえると嬉しい。</p><h3 id=fusuma-plugin-appmatcherのインストール>fusuma-plugin-appmatcherのインストール</h3><p>ターミナルで↓のコマンドを実行</p><pre><code>$ sudo gem install fusuma-plugin-appmatcher
</code></pre><h3 id=設定で利用するアプリケーション名の取得>設定で利用するアプリケーション名の取得</h3><p>config.ymlで指定するためのアプリケーション名は<code>$ fusuma-appmatcher -l</code>で取得できる。
<code>-l</code>オプション無しの場合はフォアグラウンドのアプリケーション名のみを取得する。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ fusuma-appmatcher -l
discord
Slack
Gnome-terminal
Google-chrome
</code></pre></div><h3 id=configymlにcontext-wm_classを設定する>config.ymlに<code>context: WM_CLASS</code>を設定する</h3><p>既存のconfig.ymlに書き足す場合:</p><ol><li><code>~/.config/fusuma/config.yml</code>の最下部に<code>---</code>を追加して<code>context</code>を区切る。</li><li><code>context: { application: Google-chrome }</code>を追加する。</li><li>その下に<code>swipe: ...</code>と通常通りジェスチャを記述していく。</li></ol><p>以下の例では4本指のジェスチャをデフォルトの設定とし、Google ChromeとGnome Terminalに対して3本指のスワイプジェスチャを割り当てている。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#75715e># デフォルトのコンテキスト</span>
<span style=color:#f92672>swipe</span>:
  <span style=color:#f92672>4</span>:
    <span style=color:#f92672>up</span>:
      <span style=color:#f92672>workspace</span>: <span style=color:#ae81ff>next </span> <span style=color:#75715e># 次のワークスペースに移動</span>
      <span style=color:#f92672>keypress</span>:
        <span style=color:#f92672>LEFTSHIFT</span>:
          <span style=color:#f92672>window</span>: <span style=color:#ae81ff>next</span> <span style=color:#75715e># ウィンドウを次のワークスペースに移動</span>
    <span style=color:#f92672>down</span>:
      <span style=color:#f92672>workspace</span>: <span style=color:#ae81ff>prev </span> <span style=color:#75715e># 前のワークスペースに移動</span>
      <span style=color:#f92672>keypress</span>:
        <span style=color:#f92672>LEFTSHIFT</span>:
          <span style=color:#f92672>window</span>: <span style=color:#ae81ff>prev</span> <span style=color:#75715e># ウィンドウを前のワークスペースに移動</span>

<span style=color:#75715e># ↓Contextを区切るために`---`が必要</span>
---

<span style=color:#75715e># context: { application: Google-chrome }</span>
<span style=color:#75715e># ⇅は同じ意味</span>
<span style=color:#f92672>context</span>:
  <span style=color:#f92672>application</span>:  <span style=color:#ae81ff>Google-chrome</span>

<span style=color:#f92672>swipe</span>:
  <span style=color:#f92672>3</span>:
    <span style=color:#f92672>left</span>:
      <span style=color:#f92672>sendkey</span>: <span style=color:#e6db74>&#39;LEFTALT+RIGHT&#39;</span> <span style=color:#75715e># 進む</span>
    <span style=color:#f92672>right</span>:
      <span style=color:#f92672>sendkey</span>: <span style=color:#e6db74>&#39;LEFTALT+LEFT&#39;</span>  <span style=color:#75715e># 戻る</span>
    <span style=color:#f92672>up</span>:
      <span style=color:#f92672>sendkey</span>: <span style=color:#e6db74>&#39;LEFTCTRL+T&#39;</span>    <span style=color:#75715e># タブを開く</span>
      <span style=color:#f92672>keypress</span>:
        <span style=color:#f92672>LEFTSHIFT</span>: <span style=color:#75715e># シフトキー押しながら</span>
          <span style=color:#f92672>sendkey</span>: <span style=color:#e6db74>&#39;LEFTSHIFT+LEFTCTRL+T&#39;</span> <span style=color:#75715e># 最後に閉じたタブを開く</span>
    <span style=color:#f92672>down</span>:
      <span style=color:#f92672>sendkey</span>: <span style=color:#e6db74>&#39;LEFTCTRL+W&#39;</span>    <span style=color:#75715e># タブを閉じる</span>
---
<span style=color:#f92672>context</span>:
  <span style=color:#f92672>application</span>:  <span style=color:#ae81ff>Gnome-terminal</span>

<span style=color:#f92672>swipe</span>:
  <span style=color:#f92672>3</span>: 
    <span style=color:#f92672>up</span>:
      <span style=color:#f92672>sendkey</span>: <span style=color:#e6db74>&#39;LEFTSHIFT+LEFTCTRL+T&#39;</span> <span style=color:#75715e># タブを開く</span>
    <span style=color:#f92672>down</span>:
      <span style=color:#f92672>sendkey</span>: <span style=color:#e6db74>&#39;LEFTSHIFT+LEFTCTRL+W&#39;</span> <span style=color:#75715e># タブを閉じる</span>
</code></pre></div><p>※ この例には<a href=https://github.com/iberianpig/fusuma-plugin-wmctrl>fusuma-plugin-wmctrl</a>、<a href=https://github.com/iberianpig/fusuma-plugin-sendkey>fusuma-plugin-sendkey</a>、<a href=https://github.com/iberianpig/fusuma-plugin-keypress>fusuma-plugin-keypress</a>を利用している。</p><p>Google ChromeとGnome Terminalでそれぞれ3本指上スワイプを試してみるとどちらもタブが開く。
Google Chromeには<code>LEFTCTRL+T</code>、Gnome Terminalには<code>LEFTSHIFT+LEFTCTRL+T</code>とそれぞれ異なるキーを割り当てることができた。</p><p>Fusuma v2から<code>---</code>を含むYAMLドキュメントを処理できるようになった。<code>---</code>で区切られた先頭のドキュメントがデフォルト設定として扱われる。
ちなみに<code>---</code>は1つのファイル内で複数ドキュメントを記述できるYAML標準のシンタックスである。</p><h2 id=mac-osの3本指ドラッグをlinuxで実現する>Mac OSの3本指ドラッグをLinuxで実現する</h2><p>Mac OSのトラックパッドでの3本指のドラッグ機能が便利らしいことを目にした。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>Mac の操作がヌルヌルできない人はこの設定入れておくと良いぞ？ / Mac で最高に便利な「3本指のドラッグ」 - kakakakakku blog <a href=https://t.co/4Un28vU11q>https://t.co/4Un28vU11q</a></p>&mdash; カック@テックブロガー (@kakakakakku) <a href="https://twitter.com/kakakakakku/status/1164903204238135296?ref_src=twsrc%5Etfw">August 23, 2019</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><blockquote><p>「3本指のドラッグ」の用途は無限にあって，具体的な例を挙げておく．Keynote でキレイな発表資料を作るときも使えないと困ってしまう．</p><ul><li>Chrome で表示されている文字をドラッグしてコピーするとき</li><li>iTerm2 でターミナルの結果をドラッグしてコピーするとき</li><li>Keynote でオブジェクトのサイズを変更するとき</li></ul></blockquote><p>とても便利そう。ということで実装したのがこちら。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>Linuxタッチパッドで3本指ドラッグ <a href=https://t.co/kFNtKGU9x2>pic.twitter.com/kFNtKGU9x2</a></p>&mdash; iberianpig(Kohei Yamada) (@nukumaro22) <a href="https://twitter.com/nukumaro22/status/1364924640125014021?ref_src=twsrc%5Etfw">February 25, 2021</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>テキスト選択、Chromeのタブ移動、ウィンドウの移動など、3本指ドラッグは確かに便利。
トラックパッドでクリックしてから別の指でドラッグするよりも、3本指ドラッグは操作ステップが少く直感的に動かせる。</p><h3 id=3本指ドラッグの設定方法>3本指ドラッグの設定方法</h3><p>↓ を<code>~/.config/fusuma/config.yml</code>に設定して、Fusumaを再起動すると3本指のドラッグができるようになっている。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>swipe</span>:
  <span style=color:#f92672>3</span>:
    <span style=color:#f92672>begin</span>:
      <span style=color:#f92672>command</span>: <span style=color:#ae81ff>xdotool mousedown 1</span> <span style=color:#75715e># 左マウスボタンを押し続ける</span>
    <span style=color:#f92672>update</span>:
      <span style=color:#f92672>command</span>: <span style=color:#ae81ff>xdotool mousemove_relative -- $move_x, $move_y</span> <span style=color:#75715e># マウス移動</span>
      <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>0.01</span> <span style=color:#75715e># 更新間隔を小さく</span>
      <span style=color:#f92672>accel</span>: <span style=color:#ae81ff>2</span> <span style=color:#75715e># マウスの移動量の増加</span>
    <span style=color:#f92672>end</span>:
      <span style=color:#f92672>command</span>: <span style=color:#ae81ff>xdotool mouseup 1</span> <span style=color:#75715e># 左マウスボタン解放</span>
</code></pre></div><h3 id=beginupdateendプロパティ><code>begin:</code>/<code>update:</code>/<code>end:</code>プロパティ</h3><p>Fusuma v2からスワイプ、ピンチ、ローテートにジェスチャの<code>開始</code>/<code>更新</code>/<code>終了</code>イベントを割り当てを個別で設定できるようになった。</p><p>例えば上述の3本指ドラッグの設定では <code>begin:</code>/<code>update:</code>/<code>end:</code> にxdotoolの <code>マウス押下</code>/<code>マウス移動</code>/<code>マウス解放</code> を割り当ている。</p><p>またジェスチャの移動量の<code>$move_x</code>, <code>$move_y</code>, <code>$zoom</code>, <code>$rotate</code>が変数として扱えるようにした。
<code>accel: 2</code> は<code>$move_x</code>, <code>$move_y</code>などの値を2倍にする。3本指ドラッグで移動距離を増やすのに使っていて、今の所ほぼ3本指ドラッグ専用の機能。
これらの変数は<code>command:</code>に指定されたコマンドから環境変数としてアクセスできる。</p><p>実は3本指ドラッグは以前からGithubに機能追加のIssueはあって、実装したかった機能の1つだった。</p><div class=iframely-embed><div class=iframely-responsive style=padding-bottom:50%;padding-top:120px><a href=https://github.com/iberianpig/fusuma/pull/224 data-iframely-url="//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fgithub.com%2Fiberianpig%2Ffusuma%2Fpull%2F224&key=f073c4f447189e73167146bd9d0f6195"></a></div></div><script async src=//cdn.iframe.ly/embed.js></script><p><code>開始</code>/<code>更新</code>/<code>終了</code>イベントに個別のアクションの割当が可能になり、複雑なジェスチャがconfig.ymlで表現できるようになった。
ちなみに後述のAlt+Tabのウィンドウ切り替えやローテートの音量・輝度調節もこの機能で実現している。</p><h2 id=windowsの3本指スワイプでのウィンドウ切り替えをlinuxで実現する>Windowsの3本指スワイプでのウィンドウ切り替えをLinuxで実現する</h2><p>こちらもFusumaのGithub Issueでユーザーから機能要望が上がってきたものだった。
Windowsは3本指の左右スワイプするとウィンドウの切り替えができるらしく、Windowsマシンが手元になかったのでヨドバシカメラで動作確認した。</p><p>Alt+Tabを送信してウィンドウ切り替えを真似てみた。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>Linuxで3本指スワイプのウィンドウ切り替え <a href=https://t.co/Zr1jBrqCd5>pic.twitter.com/Zr1jBrqCd5</a></p>&mdash; iberianpig(Kohei Yamada) (@nukumaro22) <a href="https://twitter.com/nukumaro22/status/1393227683039903753?ref_src=twsrc%5Etfw">May 14, 2021</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>スワイプするとウィンドウを切り替え、指を離すまではプレビューが出る。
こちらもFusuma v2の<code>begin:</code>/<code>update:</code>/<code>end:</code>を使って再現した。</p><h3 id=3本指スワイプによるウィンドウ切り替えの設定方法>3本指スワイプによるウィンドウ切り替えの設定方法</h3><p>Alt+Tabのウィンドウ切り替えをconfig.ymlに記述する。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>swipe</span>:
  <span style=color:#f92672>3</span>:
    <span style=color:#f92672>begin</span>:
      <span style=color:#f92672>command</span>: <span style=color:#ae81ff>xdotool keydown Alt</span> <span style=color:#75715e># Altキーを押し続ける</span>
    <span style=color:#f92672>right</span>:
      <span style=color:#f92672>update</span>:
        <span style=color:#f92672>command</span>: <span style=color:#ae81ff>xdotool key Tab </span> <span style=color:#75715e># Tabキーを押下</span>
        <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>5</span>
    <span style=color:#f92672>left</span>:
      <span style=color:#f92672>update</span>:
        <span style=color:#f92672>command</span>: <span style=color:#ae81ff>xdotool key Shift+Tab</span> <span style=color:#75715e># Shift+Tabキーを押下</span>
        <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>5</span>
    <span style=color:#f92672>end</span>:
      <span style=color:#f92672>command</span>: <span style=color:#ae81ff>xdotool keyup Alt  Alt</span> <span style=color:#75715e># Altキー解放</span>
</code></pre></div><p><code>Alt</code>を押しっぱなしにして指が左右へ移動する時に<code>Tab</code>/<code>Shift+Tab</code>を押下する。
ウィンドウの切り替えが早すぎると使いづらいので<code>interval: 5</code>を設定して<code>update:</code>のイベントを間引いている。
ちなみに<code>begin:</code>/<code>update:</code>/<code>end:</code>はSwipeやPinch/Rotateの方向プロパティ(<code>right</code>/<code>left</code>など)の下にも設定できる。</p><h2 id=スワイプローテートによる音量輝度調整>スワイプ/ローテートによる音量・輝度調整</h2><p>3本指のローテート(回転)ジェスチャで音量が変更できる。Shiftキーを押すと音量変化の幅が小さくなって微調整が効く。
ALTキーを押しながら回転させると輝度を変更する。</p><blockquote class=twitter-tweet><p lang=ja dir=ltr>Linuxで回転ジェスチャによる音量・輝度調節 <a href=https://t.co/nxGUxFFV9R>pic.twitter.com/nxGUxFFV9R</a></p>&mdash; iberianpig(Kohei Yamada) (@nukumaro22) <a href="https://twitter.com/nukumaro22/status/1393232055383691274?ref_src=twsrc%5Etfw">May 14, 2021</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><h3 id=スワイプローテートによる音量輝度調整の設定方法>スワイプ/ローテートによる音量・輝度調整の設定方法</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>rotate</span>:
  <span style=color:#f92672>3</span>:
    <span style=color:#f92672>clockwise</span>: <span style=color:#75715e># 時計回り</span>
      <span style=color:#f92672>update</span>:
        <span style=color:#f92672>sendkey</span>: <span style=color:#ae81ff>VOLUMEUP</span> <span style=color:#75715e># 音量UP </span>
        <span style=color:#f92672>LEFTSHIFT</span>: <span style=color:#75715e># Shift押しながら</span>
          <span style=color:#f92672>sendkey</span>: <span style=color:#ae81ff>LEFTSHIFT+VOLUMEUP</span> <span style=color:#75715e># 音量UP(微増)</span>
        <span style=color:#f92672>LEFTALT</span>: <span style=color:#75715e># Alt押しながら</span>
          <span style=color:#f92672>sendkey</span>: <span style=color:#ae81ff>BRIGHTNESSUP</span> <span style=color:#75715e># 輝度UP</span>
    <span style=color:#f92672>counterclockwise</span>:  <span style=color:#75715e># 反時計回り</span>
      <span style=color:#f92672>update</span>:
        <span style=color:#f92672>sendkey</span>: <span style=color:#ae81ff>VOLUMEDOWN</span> <span style=color:#75715e># 音量DOWN</span>
        <span style=color:#f92672>LEFTSHIFT</span>: <span style=color:#75715e># Shift押しながら</span>
          <span style=color:#f92672>sendkey</span>: <span style=color:#ae81ff>LEFTSHIFT+VOLUMEDOWN </span> <span style=color:#75715e># 音量DOWN(微減)</span>
        <span style=color:#f92672>LEFTALT</span>: <span style=color:#75715e># Alt押しながら</span>
          <span style=color:#f92672>sendkey</span>: <span style=color:#ae81ff>BRIGHTNESSDOWN </span> <span style=color:#75715e># 輝度DOWN</span>
</code></pre></div><p><code>rotate:</code> x <code>update:</code>イベントの動作確認用に設定していたのだが、使ってみたら意外と便利だったのでそのまま使っている。<br>回転ジェスチャやピンチジェスチャはコツがいるので、難しい場合は修飾キー+上下スワイプでの音量・輝度調整が簡単でオススメ。</p><h2 id=その他の設定はwikiへ>その他の設定はWikiへ</h2><p>今回紹介した設定は<a href=https://github.com/iberianpig/fusuma/wiki>fusuma Wiki</a>に追加した。</p><p>誰でも編集できて、各々がおすすめの設定を載せているので参考になるので見て欲しい。
また、便利設定を発見したら共有してもらえると嬉しい。</p></div><aside class=p-share><div class=share-inner><a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2021-04-26_introducing_new_fusuma_2_features%2f&text=Fusuma%e3%81%8cv2%e3%81%ab%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%e3%81%97%e3%81%9f%e3%81%ae%e3%81%a7%e6%96%b0%e6%a9%9f%e8%83%bd%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%99%e3%82%8b&tw_p=tweetbutton" title=Twitterでシェア class=tw target=_blank rel=nofollow></a><a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fiberianpig.github.io%2fposts%2f2021-04-26_introducing_new_fusuma_2_features%2f&t=Fusuma%e3%81%8cv2%e3%81%ab%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%e3%81%97%e3%81%9f%e3%81%ae%e3%81%a7%e6%96%b0%e6%a9%9f%e8%83%bd%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%99%e3%82%8b" title=Facebookでシェア class=fb target=_blank rel=nofollow></a><a href="http://b.hatena.ne.jp/add?mode=confirm&url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2021-04-26_introducing_new_fusuma_2_features%2f&title=Fusuma%e3%81%8cv2%e3%81%ab%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%e3%81%97%e3%81%9f%e3%81%ae%e3%81%a7%e6%96%b0%e6%a9%9f%e8%83%bd%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%99%e3%82%8b" title=はてなブックマーク class=ht target=_blank rel=nofollow></a><a href="http://getpocket.com/edit?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2021-04-26_introducing_new_fusuma_2_features%2f&title=Fusuma%e3%81%8cv2%e3%81%ab%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%e3%81%97%e3%81%9f%e3%81%ae%e3%81%a7%e6%96%b0%e6%a9%9f%e8%83%bd%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%99%e3%82%8b" title=Pocketであとで読む class=pk target=_blank rel=nofollow></a></div></aside><aside><section><div><div id=disqus_thread></div></div></section></aside></div></article></div><div class=col-md-3><aside class=site><section><header>Table Of Contents</header><div><nav id=TableOfContents><ul><li><a href=#fusuma-v2のアップデートの概要>Fusuma v2のアップデートの概要</a></li><li><a href=#動作確認した環境>動作確認した環境</a></li><li><a href=#fusumaとプラグインを最新版にアップデート>Fusumaとプラグインを最新版にアップデート</a></li><li><a href=#アプリケーション固有のジェスチャを設定する>アプリケーション固有のジェスチャを設定する</a><ul><li><a href=#fusuma-plugin-appmatcherのインストール>fusuma-plugin-appmatcherのインストール</a></li><li><a href=#設定で利用するアプリケーション名の取得>設定で利用するアプリケーション名の取得</a></li><li><a href=#configymlにcontext-wm_classを設定する>config.ymlに<code>context: WM_CLASS</code>を設定する</a></li></ul></li><li><a href=#mac-osの3本指ドラッグをlinuxで実現する>Mac OSの3本指ドラッグをLinuxで実現する</a><ul><li><a href=#3本指ドラッグの設定方法>3本指ドラッグの設定方法</a></li><li><a href=#beginupdateendプロパティ><code>begin:</code>/<code>update:</code>/<code>end:</code>プロパティ</a></li></ul></li><li><a href=#windowsの3本指スワイプでのウィンドウ切り替えをlinuxで実現する>Windowsの3本指スワイプでのウィンドウ切り替えをLinuxで実現する</a><ul><li><a href=#3本指スワイプによるウィンドウ切り替えの設定方法>3本指スワイプによるウィンドウ切り替えの設定方法</a></li></ul></li><li><a href=#スワイプローテートによる音量輝度調整>スワイプ/ローテートによる音量・輝度調整</a><ul><li><a href=#スワイプローテートによる音量輝度調整の設定方法>スワイプ/ローテートによる音量・輝度調整の設定方法</a></li></ul></li><li><a href=#その他の設定はwikiへ>その他の設定はWikiへ</a></li></ul></nav></div></section><section><header>Latest Posts</header><div><article class=li><a href=https://iberianpig.github.io/posts/2021-04-26_introducing_new_fusuma_2_features/ class=clearfix><div class=image style=background-image:url(https://opengraph.githubassets.com/ecc39c3b5067e737618dce4b17876b2ef6c628c6dbcacd9db938a2a57e8b161c/iberianpig/fusuma)></div><footer><div class=date><div class=time>Mon, Apr 26, 2021</div></div><h2 class=title>Fusumaがv2にアップデートしたので新機能を紹介する</h2></footer></a></article><article class=li><a href=https://iberianpig.github.io/posts/2019-05-14_upgrade_to_elementary_os_5.0_juno/ class=clearfix><div class=image style=background-image:url(https://i.gyazo.com/b91034c425a91a6bda3ad6af608a61ac.png)></div><footer><div class=date><div class=time>Tue, May 14, 2019</div></div><h2 class=title>Upgrade to elementary OS 5.0 Juno</h2></footer></a></article><article class=li><a href=https://iberianpig.github.io/posts/2019-04-30_how-to-use-tig-explorer.vim/ class=clearfix><div class=image style=background-image:url(https://i.gyazo.com/181fef546cced7ca6dc651dff59cd1bf.gif)></div><footer><div class=date><div class=time>Tue, Apr 30, 2019</div></div><h2 class=title>tig-explorer.vimの使い方</h2></footer></a></article><article class=li><a href=https://iberianpig.github.io/posts/2019-04-28_%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E8%A8%98%E4%BA%8B/ class=clearfix><div class=image style=background-image:url(https://i.gyazo.com/cfb534014d1237c291ff4e7c6e3e885d.gif)></div><footer><div class=date><div class=time>Sun, Apr 28, 2019</div></div><h2 class=title>2019/04/28 最近読んだ記事</h2></footer></a></article><article class=li><a href=https://iberianpig.github.io/posts/2019-02-22_cusomize_fusuma/ class=clearfix><div class=image style=background-image:url(https://i.gyazo.com/504267be3d139795a2231eb0f7896df5.png)></div><footer><div class=date><div class=time>Fri, Feb 22, 2019</div></div><h2 class=title>Fusumaのインストールと設定</h2></footer></a></article></div></section><section class=taxonomies><header class=taxonomies__header>tag</header><div class=taxonomies__body><ul><li><a href=https://iberianpig.github.io/tags/linux/>linux</a></li><li><a href=https://iberianpig.github.io/tags/ruby/>ruby</a></li><li><a href=https://iberianpig.github.io/tags/vim/>vim</a></li><li><a href=https://iberianpig.github.io/tags/elementaryos/>elementaryos</a></li><li><a href=https://iberianpig.github.io/tags/rails/>rails</a></li><li><a href=https://iberianpig.github.io/tags/ubuntu/>ubuntu</a></li><li><a href=https://iberianpig.github.io/tags/git/>git</a></li><li><a href=https://iberianpig.github.io/tags/libinput/>libinput</a></li><li><a href=https://iberianpig.github.io/tags/android/>android</a></li><li><a href=https://iberianpig.github.io/tags/javascript/>javascript</a></li></ul></div></section><section class=author><header class=author__header>About Me</header><div class=author__body><div class=aboutme><div class=aboutme__icon><i class="fas fa-piggy-bank fa-lg">Kohei Yamada</i></div>趣味・仕事で平日休日変わらず毎日コードを書いてます。</div><div class=aboutwork><div class=aboutwork__icon><i class="fas fa-briefcase fa-lg">Work</i></div>エンジニアチームでスタートアップのお手伝いをしています。バックエンド、フロントエンド問わず色々。特にRubyが得意。お仕事のご相談はお気軽にどうぞ。</div><div class=contact><a target=_blank href=https://github.com/iberianpig><i class="fab fa-github"></i> https://github.com/iberianpig</a>
<a target=_blank href=https://twitter.com/nukumaro22><i class="fab fa-twitter"></i> https://twitter.com/nukumaro22</a>
<a target=_blank href=mailto:yhkyky+work@gmail.com><i class="fas fa-envelope"></i> yhkyky+work@gmail.com</a></div></div></section></aside></div></div></div><footer class=l-footer><p>Copyright (c) 2014 - 2021, iberianpigsty; all rights reserved.</p><p>Powered by <a href=http://gohugo.io target=_blank rel=nofollow>Hugo</a>, Theme <a href=https://github.com/dim0627/hugo_theme_robust target=_blank rel=nofollow>robust</a> designed by <a href=http://yet.unresolved.xyz target=_blank rel=nofollow>Daisuke Tsuji</a></p></footer><script data-no-instant src=//code.jquery.com/jquery-3.1.1.min.js></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js integrity=sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k crossorigin=anonymous></script><script data-no-instant src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js></script><script data-no-instant src=https://iberianpig.github.io/javascripts/instantclick.min.js></script><script data-no-instant>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),InstantClick.on('change',function(a){ga('create','UA-45334010-1','auto'),ga('send','pageview')}),InstantClick.on('change',function(c){for(var b=document.querySelectorAll('pre code'),a=0;a<b.length;a++)hljs.highlightBlock(b[a])}),InstantClick.on('change',function(c){var b='iberianpigsty',a;document.querySelector("#disqus_thread")&&(typeof DISQUS=='undefined'?(a=document.createElement('script'),a.type='text/javascript',a.async=!0,a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)):DISQUS.reset({reload:!0,config:function(){this.page.identifier=window.location.pathname,this.page.url=window.location.toString()}}))}),InstantClick.init()</script></body></html>