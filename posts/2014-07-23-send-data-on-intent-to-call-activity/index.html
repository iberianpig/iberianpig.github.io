<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="generator" content="Hugo 0.16-DEV" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link href="//fonts.googleapis.com/css?family=Noto+Sans:400,700|Pacifico" rel="stylesheet">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">

  <link rel="stylesheet" href="https://iberianpig.github.io/css/styles.css">
  <link rel="stylesheet" href="https://iberianpig.github.io/css/custom.css">


  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://iberianpig.github.io/index.xml">

  
  <title>send data on Intent to call activity - iberianpigsty</title>
  <meta property='og:title' content="send data on Intent to call activity - iberianpigsty">
  
  

  <meta property="og:url" content="https://iberianpig.github.io/posts/2014-07-23-send-data-on-intent-to-call-activity/">

  <meta property="og:description" content="Linux、Ruby on Rails、AngularJS、Androidなどが中心の技術ブログです。Github上でOSSのツールを公開しています。(https://github.com/iberianpig)メイン開発機はDell XPS13, OSはelementaryOS 0.4 Loki。2014年4月よりメーカー系のシステムエンジニアを退職し、現在は渋谷のスタートアップにてWebサービス開発を行っています。また、副業でフリーランスのエンジニアとしても活動中です。仕事の依頼等はtwitter: @nukumaro22までお願いします。">

  <meta property="og:image" content="'https://secure.gravatar.com/avatar/0cad0568651dbea482d80104ee3bf9b3?size=500'">
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site"    content="@nukumaro22" />
  <meta name="twitter:creator" content="@nukumaro22" />


  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https:\/\/iberianpig.github.io\/"
    },
    "headline": "send data on Intent to call activity |  ",
    "image": {
      "@type": "ImageObject",
      "url": "",
      "height": 700,
      "width": 700
    },
    "datePublished": "2014-07-23T00:00:00JST",
    "dateModified": "2014-07-23T00:00:00JST",
    "author": {
      "@type": "Person",
      "name": "Kohei Yamada",
      "image": "https:\/\/iberianpig.github.io\/images/logo.png"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Copyright (c) 2014 - 2016, iberianpigsty; all rights reserved.",
      "logo": {
        "@type": "ImageObject",
        "url": "https:\/\/iberianpig.github.io\/images/logo.png",
        "height": 60,
        "width": 60
      }
    },
    "description": ""
  }
</script>


  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-4578444047174224",
      enable_page_level_ads: true
    });
  </script>
</head>

  <body>
    <header class="l-header">
  <div class="p-logo">
    <a href="https://iberianpig.github.io/">iberianpigsty</a>
  </div>
</header>


    <div class="container">

      <div class="row">
        <div class="col-md-9">

          <article class="single">
            <div class="image" style="background-image: url(https://iberianpig.github.io//images/default.jpg);"></div>
            <div class="body">
              <h1>send data on Intent to call activity</h1>
              <aside class="p-share">
  <div class="share-inner">
    <a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f&text=send%20data%20on%20Intent%20to%20call%20activity&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"></a>
    <a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f&t=send%20data%20on%20Intent%20to%20call%20activity" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"></a>
    <a href="https://plus.google.com/share?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"></a>
    <a href="http://b.hatena.ne.jp/add?mode=confirm&url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f&title=send%20data%20on%20Intent%20to%20call%20activity" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow"></a>
    <a href="http://getpocket.com/edit?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f&title=send%20data%20on%20Intent%20to%20call%20activity" title="Pocketであとで読む" class="pk" target="_blank" rel="nofollow"></a>
    <a href="http://line.me/R/msg/text/?send%20data%20on%20Intent%20to%20call%20activity https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow"></a>
  </div>
</aside>

              
<section>
  <div class="adsense">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <ins class="adsbygoogle"
      style="display:block"
      data-ad-slot="2746766592"
      data-ad-client="ca-pub-4578444047174224"
      data-ad-format="auto"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
</section>


              

<p>#Activityとは</p>

<h2 id="androidの画面単位の概念:c2c063becef589ed6b639d4c6569fd2e">Androidの画面単位の概念</h2>

<p>一つのアクティビティに対してクラス一つが割り当てされる<br />
  &ndash;&gt;1つのXML(Viewテンプレート)と1つのJavaクラス(Activity)が必要となる</p>

<p>#Intentとは</p>

<blockquote>
<p>インテントというのは簡単に言えばアクティビティなどが他のアクティビティやアプリケーションなどと情報のやり取りを行うための箱のようなものです。インテントという箱には、相手先や届けたい情報などが含まれています。</p>

<p>アクティビティから他の指定したアクティビティへインテントを送ることがあります。例えば他の画面を表示したい場合などです。</p>
</blockquote>

<p>(参考:　<a href="http://www.javadrive.jp/android/intent/index1.html">http://www.javadrive.jp/android/intent/index1.html</a>)</p>

<!-- more -->

<p>##暗黙的インテントと明示的インテント</p>

<blockquote>
<p>どの機能を呼び出すかをあらかじめ指定して直接それを起動することを「明示的インテント」(explicit intent)、何をしたいかは明示せずに漠然とそのデータに対して実行できる機能の一覧を要求することを「暗黙的インテント」(implicit intent)という。</p>
</blockquote>

<p>(参考: <a href="http://e-words.jp/w/E382A4E383B3E38386E383B3E38388.html">http://e-words.jp/w/E382A4E383B3E38386E383B3E38388.html</a>)</p>

<p>##どうやって起動するのか</p>

<blockquote>
<p><strong>インテント</strong>の<strong>アクション</strong>とは、あるオブジェクトが他のオブジェクトを起動する際に、何をしたいのかを指すための指定です。ここでいうオブジェクトはActivityやサービスのことを指します。</p>

<p>アクションを指定するには、Intentクラスのコンストラクタで指定するか、もしくはIntentクラスのsetActionメソッドを使って指定します。### また、指定するアクションはすべてIntentクラスの遷移元への値の渡し方と受け取り方定数として定義されていますので、該当な定数を使ってアクションを以下のように指定します。</p>
</blockquote>

<p>``` java activity.java</p>

<p>// アクションを指定してインテントのインスタンス生成
Intent intent = new Intent(Intent.ACTION_MAIN);</p>

<p>// 次画面のアクティビティ起動
startActivity(intent);
```</p>

<p>インテントを<strong>new Intent</strong>してそれを<strong>startActivity()</strong>の引数に入れて起動するらしい。</p>

<h3 id="startactivityとは:c2c063becef589ed6b639d4c6569fd2e">StartActivityとは</h3>

<p>同一アプリ内の画面を呼び出すときは<strong>明示的Intent</strong>を作成する。そして<strong>startActivity()</strong>の引数として引き渡すことでそれを実現する。ただし、この挙動は一方通行のようなもの。呼び出し元の情報を返して欲しいときは<strong>startActivityForResult()</strong>を使う。</p>

<blockquote>
<p>また、アクションには「<strong>アクティビティアクション</strong>」と「<strong>ブロードキャストアクション</strong>」があります。</p>
</blockquote>

<p>###アクティビティアクション
&gt;<strong>アクティビティアクション</strong>とは、他のアクティビティを起動する際に、何をしたいのかを示すためのアクションです。具体的には以下のものがあります</p>

<table>
<thead>
<tr>
<th align="left">アクション</th>
<th align="left">機能</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">ACTION_MAIN</td>
<td align="left">メインエントリーポイントとしてアクションを起動する。データを戻すことができない。</td>
</tr>

<tr>
<td align="left">ACTION_VIEW</td>
<td align="left">データをユーザに表示するためにアクションを起動する。</td>
</tr>

<tr>
<td align="left">ACTION_ATTACH_DATA</td>
<td align="left">別の場所にデータが添付されていることを示す。</td>
</tr>

<tr>
<td align="left">ACTION_EDIT</td>
<td align="left">データを編集するためにアクションを起動する。</td>
</tr>

<tr>
<td align="left">ACTION_PICK</td>
<td align="left">データの中からアイテムを選択するためにアクションを起動する。選択されたアイテムを受け取る。</td>
</tr>

<tr>
<td align="left">ACTION_CHOOSER</td>
<td align="left">起動するActivityを選択するチューザーをユーザに示し、選択してもらう。</td>
</tr>

<tr>
<td align="left">ACTION_GET_CONTENT</td>
<td align="left">指定した種類のデータをユーザに選択、もしくは作成してもらう。</td>
</tr>

<tr>
<td align="left">ACTION_DIAL</td>
<td align="left">データで指定した番号を電話番号として設定する。データを指定しなければ、ユーザがその場で設定する。電話をかける操作はユーザに任せる。</td>
</tr>

<tr>
<td align="left">ACTION_CALL</td>
<td align="left">データで指定した人に電話をかける。データを指定しなければ、ユーザがその場で指定した番号に電話をかける。</td>
</tr>

<tr>
<td align="left">ACTION_SEND</td>
<td align="left">別の人にデータを送信する。データの宛先は指定しない。このIntentを受け取ったアクションが、ユーザに宛先を問う。</td>
</tr>

<tr>
<td align="left">ACTION_SENDTO</td>
<td align="left">データによって指定された人にメッセージを送信する。</td>
</tr>

<tr>
<td align="left">ACTION_ANSWER</td>
<td align="left">かかってきた電話に対処するアクションを起動する。</td>
</tr>

<tr>
<td align="left">ACTION_INSERT</td>
<td align="left">データに含まれるURIが示すディレクトリに秋のデータを挿入する。</td>
</tr>

<tr>
<td align="left">ACTION_DELETE</td>
<td align="left">データに含まれるURIが示すデータをコンテナから削除する。</td>
</tr>

<tr>
<td align="left">ACTION_RUN</td>
<td align="left">データを起動する。その意味はデータの種類によって異なる。</td>
</tr>

<tr>
<td align="left">ACTION_SYNC</td>
<td align="left">データの同期を実行する。</td>
</tr>

<tr>
<td align="left">ACTION_PICK_ACTIVITY</td>
<td align="left">Intentが与えられるActivityを選択し、そのクラスを返す。</td>
</tr>

<tr>
<td align="left">ACTION_SEARCH</td>
<td align="left">検索を実行する。</td>
</tr>

<tr>
<td align="left">ACTION_WEB_SEARCH</td>
<td align="left">WEB検索を実行する。</td>
</tr>

<tr>
<td align="left">ACTION_FACTORY_TEST</td>
<td align="left">デバイスが工場検査モードで起動する際にだけ実行される工場検査のメインエントリポイントとして起動する。</td>
</tr>
</tbody>
</table>

<h3 id="ブロードキャストアクション:c2c063becef589ed6b639d4c6569fd2e">ブロードキャストアクション</h3>

<blockquote>
<p>ブロードキャストアクションとは、なんらかのイベントが発生したことを他のオブジェクトに知らせる際に指定するアクションです。</p>
</blockquote>

<table>
<thead>
<tr>
<th align="left">アクション</th>
<th align="left">機能</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">ACTION_BATTERY_CHANGED</td>
<td align="left">充電中かどうかや、電池残量が変わった時に送られる。</td>
</tr>

<tr>
<td align="left">ACTION_BATTERY_LOW</td>
<td align="left">電池残量が少なくなった場合に送られる。</td>
</tr>

<tr>
<td align="left">ACTION_BOOT_COMPLETED</td>
<td align="left">システムの起動が完了したことを示す。</td>
</tr>

<tr>
<td align="left">ACTION_PACKAGE_ADDED</td>
<td align="left">新しいアプリケーションパケージがつかされたことを示す。</td>
</tr>

<tr>
<td align="left">ACTION_PACKAGE_CHANGED</td>
<td align="left">存在するアプリケーションのパケージが変更されたことを示す。</td>
</tr>

<tr>
<td align="left">ACTION_PACKAGE_REMOVED</td>
<td align="left">アプリケーションパケージを削除したことを示す。</td>
</tr>

<tr>
<td align="left">ACTION_TIMEZONE_CHANGED</td>
<td align="left">タイムゾーンが変更されたことを示す。</td>
</tr>

<tr>
<td align="left">ACTION_TIME_CHANGED</td>
<td align="left">時刻が変更されたことを示す。</td>
</tr>

<tr>
<td align="left">ACTION_TIME_TICK</td>
<td align="left">現在時刻が変わった時に毎分送られるアクション。</td>
</tr>

<tr>
<td align="left">ACTION_HEADSET_PLUG</td>
<td align="left">ハンドセットのプラグが抜き差しされたことを示す。</td>
</tr>
</tbody>
</table>

<p>(参考:　<a href="http://it-trick-java.appspot.com/android/c3152/page7212.html">http://it-trick-java.appspot.com/android/c3152/page7212.html</a>)</p>

<h2 id="intentに値-メッセージを乗っけて呼び出し先アクティビティに引き渡す:c2c063becef589ed6b639d4c6569fd2e">Intentに値・メッセージを乗っけて呼び出し先アクティビティに引き渡す</h2>

<p>Activity呼び出す際に<code>setStart(intent)</code>とするが、そのintentの中身に仕込む。</p>

<blockquote>
<p>遷移先のActivityを指定してIntentを作成し、『startActivity()』メソッドにてActivityを開始します。<br />
その際、Activityを開始させる前にIntentへ値を保持させる事で、遷移先へ値を渡す事が可能です。<br />
遷移先では、渡されてきた値を受け取るというよりも、起動に利用されたIntentの中にある値を取得するイメージです。<br />
Intentを値の一時保管場所として、値を保持出来れば遷移先からもIntent内の値を取得する事が出来るといった考え方です。
Intentへ値を保持させるには『putExtra()』メソッドを使用しましょう。</p>
</blockquote>

<p>(参考: <a href="http://web-terminal.blogspot.jp/2013/06/android.html#How-to-receive-and-how-to-pass-a-value-to-a-transition-destination">http://web-terminal.blogspot.jp/2013/06/android.html#How-to-receive-and-how-to-pass-a-value-to-a-transition-destination</a>)</p>

<h3 id="遷移先へ値を渡す:c2c063becef589ed6b639d4c6569fd2e">遷移先へ値を渡す</h3>

<p><code>intent.putExtra(key, val)</code>でインテントに値を保持させることができる。</p>

<pre><code>// 遷移先のactivityを指定してintentを作成
Intent intent = new Intent( this, MyActivity.class );
// intentにkey, valueをセット
intent.putExtra( &quot;key&quot;, &quot;value&quot; );
// 指定のActivityを開始
startActivity( intent );
</code></pre>

<h3 id="遷移先で値を取得する:c2c063becef589ed6b639d4c6569fd2e">遷移先で値を取得する</h3>

<p><code>val = intent.getStringExtra(key)</code>で保持させた値を取得することができる</p>

<pre><code>// 現在のintentを取得する
Intent intent = getIntent();
// intentから指定キーの文字列を取得する
String name = intent.getStringExtra( &quot;key&quot; );
</code></pre>

<p>getIntent()でintentを取得。
intent.getStringExtra()で指定したキーに対となる値を取得できる。</p>

<h5 id="型指定での取得:c2c063becef589ed6b639d4c6569fd2e">型指定での取得</h5>

<p>今回保持していた値は&rdquo;value&rdquo;というString型だったため、getStringExtraとなった。
格納時の方によって呼び出し方は異なる。</p>

<table>
<thead>
<tr>
<th align="left">型</th>
<th align="left">取得メソッド名</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">真偽値の配列（boolean[])</td>
<td align="left">getBooleanArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">真偽値(boolean)</td>
<td align="left">getBooleanExtra( &ldquo;キー&rdquo; , デフォルト値 )</td>
</tr>

<tr>
<td align="left">バンドル(Bundle)</td>
<td align="left">getBundleExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">バイト配列(byte[])</td>
<td align="left">getByteArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">バイト(byte)</td>
<td align="left">getByteExtra( &ldquo;キー&rdquo; , デフォルト値 )</td>
</tr>

<tr>
<td align="left">文字配列(char[])</td>
<td align="left">getCharArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">文字(char)</td>
<td align="left">getCharExtra( &ldquo;キー&rdquo; , デフォルト値 )</td>
</tr>

<tr>
<td align="left">文字シーケンス配列(CharSequence[])</td>
<td align="left">getCharSequenceArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">文字シーケンスの配列（ArrayList)</td>
<td align="left">getCharSequenceArrayListExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">文字シーケンス(CharSequence)</td>
<td align="left">getCharSequenceExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">浮動小数点数配列(double[])</td>
<td align="left">getDoubleArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">浮動小数点数(double)</td>
<td align="left">getDoubleExtra( &ldquo;キー&rdquo; , デフォルト値 )</td>
</tr>

<tr>
<td align="left">浮動小数点数配列(float[])</td>
<td align="left">getFloatArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">浮動小数点数(float)</td>
<td align="left">getFloatExtra( &ldquo;キー&rdquo; , デフォルト値 )</td>
</tr>

<tr>
<td align="left">整数配列(int[])</td>
<td align="left">getIntArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">整数(int)</td>
<td align="left">getIntExtra( &ldquo;キー&rdquo; , デフォルト値 )</td>
</tr>

<tr>
<td align="left">整数オブジェクトの配列(ArrayList)</td>
<td align="left">getIntegerArrayListExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">整数配列(long[])</td>
<td align="left">getLongArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">整数(long)</td>
<td align="left">getLongExtra( &ldquo;キー&rdquo; , デフォルト値 )</td>
</tr>

<tr>
<td align="left">オブジェクトの一時的保管領域配列(Parcelable[])</td>
<td align="left">getParcelableArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">オブジェクトの一時的保管領域配列( ArrayList)</td>
<td align="left">getParcelableArrayListExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">オブジェクトの一時的保管領域( T)</td>
<td align="left">getParcelableExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">シリアライズ(Serializable)</td>
<td align="left">getSerializableExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">整数配列(short[])</td>
<td align="left">getShortArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">整数(short)</td>
<td align="left">getShortExtra( &ldquo;キー&rdquo; , デフォルト値 )</td>
</tr>

<tr>
<td align="left">文字列配列(String[])</td>
<td align="left">getStringArrayExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">文字列配列(ArrayList)</td>
<td align="left">getStringArrayListExtra( &ldquo;キー&rdquo; )</td>
</tr>

<tr>
<td align="left">文字列(String)</td>
<td align="left">getStringExtra( &ldquo;キー&rdquo; )</td>
</tr>
</tbody>
</table>

<blockquote>
<p>全て添え字指定にて値を識別し、取得しますが
該当する添え字が無い場合、基本的にはnullが返却されます。
上記一覧内のメソッドの中には、第二引数にデフォルト値を指定出来るものがあり、
そのようなメソッドでは、キーに該当するものが無い場合はデフォルト値が返却されます。
もちろん、第二引数に指定するデフォルト値も、メソッドに該当する型である必要があります。</p>
</blockquote>

<p>(参考: <a href="http://web-terminal.blogspot.jp/2013/06/android.html">http://web-terminal.blogspot.jp/2013/06/android.html</a>)</p>

<h2 id="遷移先でセットした値を遷移元で受け取る:c2c063becef589ed6b639d4c6569fd2e">遷移先でセットした値を遷移元で受け取る</h2>

<p>今度は遷移元への値の戻し方。</p>

<h3 id="遷移元での事前準備:c2c063becef589ed6b639d4c6569fd2e">遷移元での事前準備</h3>

<p>Activityはfinish()で終了を行うことができる
前述の通り、呼び出し時にstartActivityForResult()を宣言した時のみ呼び出し元に呼び出し先の結果を戻す事が可能となる</p>

<pre><code>// 遷移先のactivityを指定してintentを作成
Intent intent = new Intent( this, MyActivity.class );
// 遷移先から返却されてくる際の識別コード
int requestCode = 1001;
// 返却値を考慮したActivityの起動を行う
startActivityForResult( intent, requestCode );
</code></pre>

<h3 id="遷移元で値を受け取るメソッド:c2c063becef589ed6b639d4c6569fd2e">遷移元で値を受け取るメソッド</h3>

<p>遷移先のアクティビティが破棄されたイベントをトリガーに発火する onActivityResult() をコールバックで実装する</p>

<pre><code>public void onActivityResult( int requestCode, int resultCode, Intent intent )
{
 // startActivityForResult()の際に指定した識別コードとの比較
 if( requestCode == 1001 ){

  // 返却結果ステータスとの比較
  if( resultCode == Activity.RESULT_OK ){

   // 返却されてきたintentから値を取り出す
   String str = intent.getStringExtra( &quot;key&quot; );
  }
 }
}
</code></pre>

<p>下記をチェックしています。</p>

<ul>
<li>requestCodeが最初にセットした値通りか。</li>
<li>返却結果ステータスがOKか（またはキャンセルか、などなど）</li>
</ul>

<p>これらが正しければ、getStringExtra()を使って文字列を取得する。</p>

<h3 id="遷移先での遷移元に戻す値のセット:c2c063becef589ed6b639d4c6569fd2e">遷移先での遷移元に戻す値のセット</h3>

<p>finish();した時にどんな値を遷移元に戻すか
    // intentの作成
    Intent intent = new Intent();</p>

<pre><code>// intentへ値を保持させる
intent.putExtra( &quot;key&quot;, &quot;result_val&quot; );

// 戻したい結果ステータスをセットする
setResult( Activity.RESULT_OK, intent );

// アクティビティを終了させる
finish();
</code></pre>

<p><code>new Intent</code>して、<code>putExtra(key,val)</code>で値を保持して、うまく行ったかどうかのステータスを<code>setResult()</code>でセットする。そして、<code>finish()</code>する、という流れ。
遷移先に値を引き渡すのと同様、<code>putExtra(key,val)</code>を使っている。</p>

<p>setResultでRESULT_OKをセットしているので、これで呼び出し元で正しく受け取れる。
独自でハンドルするときはここは独自定数で変更できそう。</p>

            </div>

            <aside class="p-share">
  <div class="share-inner">
    <a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f&text=send%20data%20on%20Intent%20to%20call%20activity&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"></a>
    <a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f&t=send%20data%20on%20Intent%20to%20call%20activity" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"></a>
    <a href="https://plus.google.com/share?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"></a>
    <a href="http://b.hatena.ne.jp/add?mode=confirm&url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f&title=send%20data%20on%20Intent%20to%20call%20activity" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow"></a>
    <a href="http://getpocket.com/edit?url=https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f&title=send%20data%20on%20Intent%20to%20call%20activity" title="Pocketであとで読む" class="pk" target="_blank" rel="nofollow"></a>
    <a href="http://line.me/R/msg/text/?send%20data%20on%20Intent%20to%20call%20activity https%3a%2f%2fiberianpig.github.io%2fposts%2f2014-07-23-send-data-on-intent-to-call-activity%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow"></a>
  </div>
</aside>

            

<aside>
  <section>
    <div>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          var disqus_shortname = 'iberianpigsty';
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </section>
</aside>




          </article>

        </div>
        <div class="col-md-3">
          <aside class="site">

  
  <section>
    <header>Table Of Contents</header>
    <div><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#androidの画面単位の概念:c2c063becef589ed6b639d4c6569fd2e">Androidの画面単位の概念</a>
<ul>
<li><a href="#startactivityとは:c2c063becef589ed6b639d4c6569fd2e">StartActivityとは</a></li>
<li><a href="#ブロードキャストアクション:c2c063becef589ed6b639d4c6569fd2e">ブロードキャストアクション</a></li>
</ul></li>
<li><a href="#intentに値-メッセージを乗っけて呼び出し先アクティビティに引き渡す:c2c063becef589ed6b639d4c6569fd2e">Intentに値・メッセージを乗っけて呼び出し先アクティビティに引き渡す</a>
<ul>
<li><a href="#遷移先へ値を渡す:c2c063becef589ed6b639d4c6569fd2e">遷移先へ値を渡す</a></li>
<li><a href="#遷移先で値を取得する:c2c063becef589ed6b639d4c6569fd2e">遷移先で値を取得する</a>
<ul>
<li>
<ul>
<li><a href="#型指定での取得:c2c063becef589ed6b639d4c6569fd2e">型指定での取得</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#遷移先でセットした値を遷移元で受け取る:c2c063becef589ed6b639d4c6569fd2e">遷移先でセットした値を遷移元で受け取る</a>
<ul>
<li><a href="#遷移元での事前準備:c2c063becef589ed6b639d4c6569fd2e">遷移元での事前準備</a></li>
<li><a href="#遷移元で値を受け取るメソッド:c2c063becef589ed6b639d4c6569fd2e">遷移元で値を受け取るメソッド</a></li>
<li><a href="#遷移先での遷移元に戻す値のセット:c2c063becef589ed6b639d4c6569fd2e">遷移先での遷移元に戻す値のセット</a></li>
</ul></li>
</ul></li>
</ul>
</nav></div>
  </section>
  

  

  <section>
    <header>Latest Posts</header>
    <div>
      
      <article class="li">
  <a href="https://iberianpig.github.io/posts/2017-06-25_fwupd_updates_firmware_in_linux/" class="clearfix">
    <div class="image" style="background-image: url(https://i.gyazo.com/265d5fab5db286263c9c9f46e604a79f.png);"></div>
    <footer>
      <div class="date">
        <time>Sun, Jun 25, 2017</time>
      </div>
      <h2 class="title">fwupdでLinuxからUEFI(BIOS)のアップデート</h2>
    </footer>
  </a>
</article>

      
      <article class="li">
  <a href="https://iberianpig.github.io/posts/2017-05-14_multi-touch-on-linux/" class="clearfix">
    <div class="image" style="background-image: url(https://camo.githubusercontent.com/97640cbbff96a8545119e063ffdeb31954d3f739/68747470733a2f2f692e6779617a6f2e636f6d2f37353766656635323633313062396436386636386538306562316534353430662e706e67);"></div>
    <footer>
      <div class="date">
        <time>Sun, May 14, 2017</time>
      </div>
      <h2 class="title">Linuxでマルチタッチのジェスチャにショートカットを割り当てるFusumaというGemを作った</h2>
    </footer>
  </a>
</article>

      
      <article class="li">
  <a href="https://iberianpig.github.io/posts/2017-02-06_how_to_upgrade_kernel/" class="clearfix">
    <div class="image" style="background-image: url(https://i.gyazo.com/f14af56a0f8f5f8f3fcbf8e5f90f71f9.png);"></div>
    <footer>
      <div class="date">
        <time>Mon, Feb 6, 2017</time>
      </div>
      <h2 class="title">Ubuntuのベースバージョンを変えずにLinuxカーネルをアップグレードする方法</h2>
    </footer>
  </a>
</article>

      
      <article class="li">
  <a href="https://iberianpig.github.io/posts/2017-01-30_Information_gathering_and_its_optimization/" class="clearfix">
    <div class="image" style="background-image: url(https://i.gyazo.com/e2361e2976238ea1b8fbc2401a1dd460.png);"></div>
    <footer>
      <div class="date">
        <time>Mon, Jan 30, 2017</time>
      </div>
      <h2 class="title">記憶の定着率を上げるPocket&#43;Kindle連携</h2>
    </footer>
  </a>
</article>

      
      <article class="li">
  <a href="https://iberianpig.github.io/posts/2017-01-24_kindle_in_the_bath/" class="clearfix">
    <div class="image" style="background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/2/20/Amazon_Kindle_logo.svg/2000px-Amazon_Kindle_logo.svg.png);"></div>
    <footer>
      <div class="date">
        <time>Tue, Jan 24, 2017</time>
      </div>
      <h2 class="title">風呂キンドルのすゝめ</h2>
    </footer>
  </a>
</article>

      
    </div>
  </section>

  
<section>
  <div class="adsense">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <ins class="adsbygoogle"
      style="display:block"
      data-ad-slot="2886367399"
      data-ad-client="ca-pub-4578444047174224"
      data-ad-format="auto"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
</section>



  
  <section>
    <header>category</header>
    <div>
      <ul>
        <li><a href="https://iberianpig.github.io/categories/linux">linux</a></li><li><a href="https://iberianpig.github.io/categories/rails">rails</a></li><li><a href="https://iberianpig.github.io/categories/life">life</a></li><li><a href="https://iberianpig.github.io/categories/javascript">javascript</a></li><li><a href="https://iberianpig.github.io/categories/vim">vim</a></li><li><a href="https://iberianpig.github.io/categories/android">android</a></li><li><a href="https://iberianpig.github.io/categories/git">git</a></li><li><a href="https://iberianpig.github.io/categories/html5">html5</a></li><li><a href="https://iberianpig.github.io/categories/marketing">marketing</a></li><li><a href="https://iberianpig.github.io/categories/css">css</a></li>
      </ul>
    </div>
  </section>
  
  <section>
    <header>tag</header>
    <div>
      <ul>
        <li><a href="https://iberianpig.github.io/tags/linux">linux</a></li><li><a href="https://iberianpig.github.io/tags/elementaryos">elementaryos</a></li><li><a href="https://iberianpig.github.io/tags/ubuntu">ubuntu</a></li><li><a href="https://iberianpig.github.io/tags/sublimetext">sublimetext</a></li><li><a href="https://iberianpig.github.io/tags/ruby">ruby</a></li><li><a href="https://iberianpig.github.io/tags/shellscript">shellscript</a></li><li><a href="https://iberianpig.github.io/tags/vim">vim</a></li><li><a href="https://iberianpig.github.io/tags/tethering">tethering</a></li><li><a href="https://iberianpig.github.io/tags/cordova">cordova</a></li><li><a href="https://iberianpig.github.io/tags/kindle">kindle</a></li>
      </ul>
    </div>
  </section>
  

  <section>
    <header>Kohei Yamada</header>
    <div>Linux、Ruby on Rails、AngularJS、Androidなどが中心の技術ブログです。Github上でOSSのツールを公開しています。(https://github.com/iberianpig)メイン開発機はDell XPS13, OSはelementaryOS 0.4 Loki。2014年4月よりメーカー系のシステムエンジニアを退職し、現在は渋谷のスタートアップにてWebサービス開発を行っています。また、副業でフリーランスのエンジニアとしても活動中です。仕事の依頼等はtwitter: @nukumaro22までお願いします。</div>
  </section>
  <a class="twitter-timeline"
  data-dnt="true"
  data-theme="light"
  data-link-color="#337ab7"
  data-tweet-limit="5"
  data-chrome="noborder noscrollbar noheader"
  href="https://twitter.com/nukumaro22"></a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


</aside>

        </div>
      </div>
    </div>

    <footer class="l-footer">
  <p>Copyright (c) 2014 - 2016, iberianpigsty; all rights reserved.</p>
  <p>Powered by <a href="http://gohugo.io" target="_blank" rel="nofollow">Hugo</a>, Theme <a href="https://github.com/dim0627/hugo_theme_robust" target="_blank" rel="nofollow">robust</a> designed by <a href="http://yet.unresolved.xyz" target="_blank" rel="nofollow">Daisuke Tsuji</a></p>
</footer>

    <script src="//code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-45334010-1', 'auto');
ga('send', 'pageview');
</script>



  </body>
</html>
